---
alerts:
  - rule: DEPLOYMENT_FAILED
  - rule: DOMAIN_FAILED
domains:
  - domain: lsbupeerevaluation.software
    type: PRIMARY
    zone: lsbupeerevaluation.software
envs:
  - key: ENVIRONMENT
    scope: RUN_AND_BUILD_TIME
    value: production
  - key: NEXT_PUBLIC_LOGICAL_ENVIRONMENT
    scope: RUN_AND_BUILD_TIME
    value: production
  - key: NEXTAUTH_SECRET
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:v0MsLtlNHPxvdEEUmR1s7WpB/64nRAtt:DHIElljN+I8WZc4l2Vl31MZCR2dXbtVIDntInaaqOR8ibhbxhah1oasgJOHBF4v6EoaG6gpotOQDIGJM]
  - key: NEXTAUTH_URL
    scope: RUN_AND_BUILD_TIME
    value: https://lsbupeerevaluation.software
  - key: SMTP_HOST
    scope: RUN_AND_BUILD_TIME
    value: smtp.gmail.com
  - key: SMTP_PORT
    scope: RUN_AND_BUILD_TIME
    value: "465"
  - key: SMTP_USER
    scope: RUN_AND_BUILD_TIME
    value: admin@lsbupeerevaluation.software
  - key: SMTP_PASSWORD
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:i+/SXIo7r5nGojcevYxMJmjGDQN+PaW7:4KPiAQxifsmFVhZQKA3arXZUi6bEicZc/FnQS0ix3jM=]
  - key: SMTP_FROM
    scope: RUN_AND_BUILD_TIME
    value: no-reply@lsbupeerevaluation.software
  - key: SMTP_SECURE
    scope: RUN_AND_BUILD_TIME
    value: "true"
  - key: DATABASE_URL_PRISMA
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:/X42pKuUn8JUTR0U92fnOVUkr8ZK8YSF:dhRSsLPXlBaO+4h1cgI8YmkgR0wjgB1GVxYsRplVTfJd1puSkoWKftxPNcjuS4r/MQj2PK/L0hjtFtfyWRYCxBK+FNvhtoXxXpu2ivciQe39CNTAbVLatoJkTX0sHlVH4qfqoNncIuhSfiLQ6AjfI9fqfXm64wVDyI4XdqCgznu+wAjJ9hsgmzQ1Feoxc638AgrB8aZ8kxP1XUq4ngVLIKIseln6DgVx4cShUF6Nc9n1rqqEwhKVoo8vYci6UrYsr3Ghaku4ngg7C0g58FGO+79ogWFL1CCnTDJu8yj+fEfZn9K1eIF8DaIUgg==]
  - key: DATABASE_URL
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:OufceX9+iqRy4aEJMbaul8sqcRda45Dm:hXEhobVtD1dyMjbV69Dy3I0DcxHZ/SWtccSnx/ouCa6vqlPLQHs/NI+HPOY44chssowjDfPaSzKpNYPO1fcukaFrvi0cw28lxU1FWRguxEQO+yQwM/0phyjn0EHvOPnWzlyh7NLERGhDLOYi2GO5+W50ipYptDJXjAznOiWQq582KZnr+leMUAsbZuG1o9l54q3h7HTjbj7FxWl+rvv0Uf6WBmmu6wg6l94UetAPNfdqZW975xlW8tLt87sulebJ5JyDMFn+rIeXkEeLkMHCY42C4dX9iwgHDV1qMYy4XrsVuPwdeq89GJVny42n9md5+OInxct+Kkdeuw==]
  - key: SENTRY_DSN
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:+TNGYrPxCR88sTsXAlzrR4seFmF0oBH2:r/v04M4gTHbIhS4Zc2yqrXj0w12+4B6UjwIXXngj3xNvqa+eX1U/D2lJK1IQxECN5JT96NfPZxjJdlpYwnMUe1Dg0yMgnLcmdMaftgnNwdE8ahEmNMr3qz8O]
  - key: NEXT_PUBLIC_SENTRY_DSN
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:UTt+6UcC3qIhjrmXEPxXSJ7uHfJp+kXu:Duyo09u66+hyRTGI8SPHCnKNjFuM+dKzv/6R98kn4IIlIlcw8x13KPhspO8Xqc8SPUoUXYUk4DFKuE4+4gTgwtBRxZEIC4rxisKnkWK+JAHRuntzG6Q40YBk]
  - key: NEXT_PUBLIC_URL
    scope: RUN_AND_BUILD_TIME
    value: https://lsbupeerevaluation.software
  - key: SENTRY_AUTH_TOKEN
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:xFeNkGiDBMNb/e9u5WUWAmncejNYCaRP:JWwdedd1o2QpHubsRymwsAI/Wmc9ojjZwul0AYboX6OdU40agrYadt1Dp3rBYvaUBdUjeaG0FxP+UPafLm/In5UDzcWhHGIbQpOEeV/sFKo=]
  - key: SENTRY_SECURITY_HEADER_ENDPOINT
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:/y33f24T45ENkjT93O7AFF2wWHOtjFfM:ds3uSawWOTK+GIUN6gYm89BmiASI+F5pR2uKZtwhkoQMouD38gny3llw2n08egwuS8tOaPhDdRRdmMO6ftlX8sPT4NxFCHoiF2t5X/beHGJ9Gli3E0Ljun2RxeqgpTA3URWiWHCHa3uKVZseP4gqwd7c9HV2sRB5l7TItAPVnxvks1No]
name: peer-evaluation-web-app-prod
region: lon
services:
  - alerts:
      - operator: GREATER_THAN
        rule: CPU_UTILIZATION
        value: 80
        window: FIVE_MINUTES
      - operator: GREATER_THAN
        rule: MEM_UTILIZATION
        value: 80
        window: FIVE_MINUTES
    dockerfile_path: Dockerfile
    github:
      branch: main
      repo: quizslides/peer-evaluation-lsbu
    health_check:
      failure_threshold: 3
      http_path: /api?query=%7B__typename%7D
      initial_delay_seconds: 30
      period_seconds: 60
      timeout_seconds: 100
    http_port: 3000
    instance_count: 1
    instance_size_slug: professional-xs
    name: peer-evaluation-web-app-prod
    routes:
      - path: /
    source_dir: /
